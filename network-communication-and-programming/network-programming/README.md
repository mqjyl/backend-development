# 网络编程

## :pencil2: 初始网络编程

### 进程间通信到网间进程通信

进程通信的概念最初来源于单机系统。由于每个进程都在自己的地址范围内运行，为保证两个相互通信的进程之间既互不干扰又协调一致工作，操作系统为进程通信提供了相应设施，如：UNIX BSD有管道（pipe）、命名管道（named pipe）软中断信号（signal）；UNIX system V有消息（message）、共享存储区（shared memory）和信号量（semaphore)等。他们都仅限于用在本机进程之间通信。网间进程通信要解决的是不同主机的进程间相互通信问题（可把同机进程通信看作是其中的特例）。为此，首先要解决的是网间进程标识问题。同一主机上，不同进程可用进程号（process ID）唯一标识。但在网络环境下，`TCP/IP`协议提出了协议端口（protocol port，简称端口）的概念，用于标识通信的进程。端口是一种抽象的软件结构（包括一些数据结构和I/O缓冲区）。应用程序（即进程）通过系统调用与某端口建立连接（binding）后，传输层传给该端口的数据都被相应进程所接收，相应进程发给传输层的数据都通过该端口输出。

### 普通IO到网络IO

UNIX系统的I/O命令集，是从`Maltics`和早期系统中的命令演变出来的，其模式为打开一读/写一关闭（open-write-read-close）。在一个用户进程进行I/O操作时，它首先调用“打开”获得对指定文件或设备的使用权，并返回称为文件描述符的整型数，以描述用户在打开的文件或设备上进行I/O操作的进程。然后这个用户进程多次调用“读/写”以传输数据。当所有的传输操作完成后，用户进程关闭调用，通知操作系统已经完成了对某对象的使用。 在`TCP/IP`协议的实现中，对端口的操作类似于一般的I/O操作，进程获取一个端口，相当于获取本地唯一的I/O文件，可以用一般的读写原语访问之。 类似于文件描述符，每个端口都拥有一个叫端口号（port number）的整数型标识符，用于区别不同端口。

### 网络应用编程界面

`TCP/IP`协议被集成到UNIX内核中时，相当于在UNIX系统引入了一种新型的I/O操作。UNIX用户进程与网络协议的交互作用比用户进程与传统的I/O设备相互作用复杂得多。首先，进行网络操作的两个进程在不同机器上，如何建立它们之间的联系？其次，网络协议存在多种，如何建立一种通用机制以支持多种协议？即**需要一种通用的网络编程接口:**  独立于具体协议和通用的网络编程，这些都是网络应用编程界面所要解决的问题。&#x20;

在UNIX系统中，网络应用编程界面有两类：UNIX BSD的套接字（socket）和UNIX System V的`TLI`。由于Sun公司采用了支持`TCP/IP`的UNIX BSD操作系统，使`TCP/IP`的应用有更大的发展，其网络应用编程界面──套接字（socket）在网络软件中被广泛应用，至今已引进微机操作系统DOS和Windows系统中，成为开发网络应用软件的强有力工具。

## :pencil2: Socket与`Winsock`

Berkeley UNIX 操作系统定义了一种 API，称为 套接字接口(socket interface)，简称套接字（socket）。微软公司在其操作系统中采用了套接字接口 API ，形成了一个稍有不同的 API，并称之为 Windows Socket Interface，`WINSOCK`。
